#bash #programming-language #scripting #tech #linux #command


## Bash Program Flow: If, Elif, Else
---

### Purpose of Program Flow

- Adds **logic** to Bash scripts.
- Executes specific code blocks only when certain **conditions** are met.
- Fundamental for **decision-making** in programming.

### Reserved Words

- **if, then, elif, else, fi** are Bash reserved words.
- Every `if` block starts with `if` and ends with `fi` (fi = if backwards).
- Similar to `{ }` in C/Java.

### Condition Testing

- Conditions usually involve **comparisons**:
   - Arithmetic (`-gt`, `-lt`, etc).
   - File tests (`-f` for file, `-d` for directory).
   - String tests.
   - Permission checks (read/write/execute).

### Example Flow:

```bash
if [ condition ]; then
   # code if condition true
elif [ another_condition ]; then
   # code if second condition true
else
   # code if all fail
fi
```

- **Only the first true condition is executed**, rest are skipped.
### True and False in Bash

- **True** = return status `0`.
- **False** = non-zero return status.

## ðŸ”¹ Syntax Rules

1. **Whitespace is required** before and after square brackets `[ ]`.
2. **`fi`** closes the entire structure.
3. Only one `if` per construct, but `elif` and `else` are optional.
4. **Indentation** is recommended for readability.

### Example: File Test

```bash
if [ -f "$1" ]; then
   echo "The argument is a file"
   cat "$1"
elif [ -d "$1" ]; then
   echo "The argument is a directory"
   ls -l "$1"
else
   echo "The argument ($1) is neither a file nor a directory"
fi
```

- `-f` â†’ true if argument is a regular file.
- `-d` â†’ true if argument is a directory.

**Tip:** 

```bash
man test # to get all test conditions and examples
```

### Double Quotes in Test

- Always use `"$1"` instead of `$1` to prevent **word splitting**.
- Ensures file names with **spaces** are handled correctly.

### Single `[ ]` vs Double `[[ ]]`

- `[ ]` â†’ classical, portable test.
- `[[ ]]` â†’ safer, prevents word splitting, supports regex.
- Even though `[[ ]]` doesnâ€™t require quoting, itâ€™s still good practice.

Example:

```bash
if [[ "$1" == *.txt ]]; then
   echo "It's a text file"
fi
```

### Key Takeaways

- Use **if-elif-else-fi** to control script flow.
- Always handle edge cases (nonexistent files, wrong input).
- Prefer `[[ ]]` over `[ ]` for safer conditions.
- Add **logic** to scripts for automation and reliability.


## Bash Test Conditions Cheat Sheet
---

### File Tests

|Condition|Meaning|
|---|---|
|`-e file`|True if **file exists**|
|`-f file`|True if file is a **regular file**|
|`-d file`|True if file is a **directory**|
|`-r file`|True if file is **readable**|
|`-w file`|True if file is **writable**|
|`-x file`|True if file is **executable**|
|`-s file`|True if file exists and is **not empty**|
|`-L file`|True if file is a **symbolic link**|

---

### String Tests

| Condition      | Meaning                                       |
| -------------- | --------------------------------------------- |
| `-z string`    | True if string is **empty**                   |
| `-n string`    | True if string is **not empty**               |
| `str1 = str2`  | True if strings are **equal**                 |
| `str1 != str2` | True if strings are **not equal**             |
| `str1 < str2`  | True if str1 is **lexicographically smaller** |
| `str1 > str2`  | True if str1 is **lexicographically greater** |

---

### Numeric Comparisons

|Condition|Meaning|
|---|---|
|`num1 -eq num2`|Equal|
|`num1 -ne num2`|Not equal|
|`num1 -gt num2`|Greater than|
|`num1 -lt num2`|Less than|
|`num1 -ge num2`|Greater or equal|
|`num1 -le num2`|Less or equal|

---

### Logical Operators

| Operator                | Meaning                      |
| ----------------------- | ---------------------------- |
| `! condition`           | NOT                          |
| `cond1 -a cond2`        | AND (both true)              |
| `cond1 -o cond2`        | OR (either true)             |
| `[[ cond1 && cond2 ]]`  | AND (preferred with `[[ ]]`) |
| `[[cond1 \|\| cond2 ]]` | OR (preferred with `[[ ]]` ) |

---

### Examples

```bash
# Check if file exists
if [ -e "$1" ]; then
   echo "File exists"
fi

# Check if directory is writable
if [ -d "$1" ] && [ -w "$1" ]; then
   echo "Directory is writable"
fi

# String comparison
if [[ "$user" == "ahmad" ]]; then
   echo "Welcome Ahmad!"
fi

# Number comparison
if [ "$age" -ge 18 ]; then
   echo "You are an adult"
fi
```

âš¡ Pro Tip:

- Use `[[ ]]` instead of `[ ]` for safer checks (handles spaces better, allows regex).
- Always quote variables: `"$var"` to prevent word splitting.
